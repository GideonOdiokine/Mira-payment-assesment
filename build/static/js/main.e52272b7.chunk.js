(this.webpackJsonplearn_react=this.webpackJsonplearn_react||[]).push([[0],{17:function(e,t,a){},25:function(e,t,a){e.exports=a(39)},30:function(e,t,a){},31:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(18),o=a.n(r),c=a(5),u=a(1),i=(a(30),a(31),function(){return l.a.createElement("nav",{className:"navbar"},l.a.createElement(c.b,{to:"/"},l.a.createElement("h2",null,"CRUD APP")),l.a.createElement("div",{className:"links"},l.a.createElement(c.b,{to:"/"},"Home "),l.a.createElement(c.b,{to:"/create"},"New Blog ")))}),s=a(9),m=a.n(s),d=a(11),h=function(e){var t=e.blog,a=e.handleDelete;return l.a.createElement("div",{className:"blog-preview flex"},l.a.createElement("div",null,l.a.createElement(c.b,{to:"/blogs/".concat(t.id)},l.a.createElement("h2",null,t.title)),l.a.createElement("p",null,"Written by ",t.author)),l.a.createElement("div",{className:"del"},l.a.createElement("button",{onClick:function(){return a(t.id)}},"Delete")))},b=function(e){var t=e.blogs,a=e.handleDelete;return l.a.createElement("div",{className:"blog-list"},l.a.createElement("h2",null,"All blogs"),null===t||void 0===t?void 0:t.map((function(e){return l.a.createElement(h,{blog:e,handleDelete:a,key:e.id})})))},E=(a(38),a(7)),f=function(e){var t=Object(n.useState)(null),a=Object(E.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)(!0),c=Object(E.a)(o,2),u=c[0],i=c[1],s=Object(n.useState)(null),m=Object(E.a)(s,2),d=m[0],h=m[1];return Object(n.useEffect)((function(){var t=new AbortController;return fetch(e,{signal:t.signal}).then((function(e){if(!e.ok)throw Error("Could not fetch the data for that resource");return e.json()})).then((function(e){r(e),i(!1),h(null)})).catch((function(e){"AbortError"===e.name?console.log("Fetch Aborted"):(i(!1),h(e.message))})),function(){return t.abort()}}),[e,l]),{data:l,loading:u,error:d}},p=function(){var e=f("http://localhost:8000/blogs"),t=e.data,a=e.loading,n=e.error,r=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/blogs/".concat(t),{method:"DELETE"}).then((function(){return console.log("Great")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"home"},n&&l.a.createElement("h4",null,n),a&&l.a.createElement("h3",null,"Loading...."),t&&l.a.createElement(b,{blogs:t,handleDelete:r}))},g=(a(17),function(){var e=Object(u.f)(),t=Object(n.useState)(""),a=Object(E.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)(""),i=Object(E.a)(c,2),s=i[0],h=i[1],b=Object(n.useState)("Gideon"),f=Object(E.a)(b,2),p=f[0],g=f[1],v=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),""!==r&&""!==s&&""!==p){t.next=5;break}alert("Please fill the form"),t.next=12;break;case 5:return n={title:r,body:s,author:p},t.next=8,fetch("http://localhost:8000/blogs",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 8:o(""),h(""),g("Gideon"),e.push("/");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return l.a.createElement("div",{className:"create"},l.a.createElement("h2",null,"Add a New Blog"),l.a.createElement("form",{onSubmit:v},l.a.createElement("label",null,"Blog title"),l.a.createElement("input",{type:"text",value:r,onChange:function(e){return o(e.target.value)},required:!0}),l.a.createElement("label",null,"Blog body"),l.a.createElement("textarea",{required:!0,value:s,onChange:function(e){return h(e.target.value)}}),l.a.createElement("label",null,"Blog author"),l.a.createElement("select",{value:p,onChange:function(e){return g(e.target.value)}},l.a.createElement("option",{value:"Gideon"},"Gideon"),l.a.createElement("option",{value:"Odiokine"},"Odiokine"),l.a.createElement("option",{value:"Okon"},"Okon")),l.a.createElement("button",null,"Add Blog")))});var v=function(){var e=Object(u.g)().id,t=f("http://localhost:8000/blogs/".concat(e)),a=t.data,n=t.loading,r=t.error;return l.a.createElement("div",{className:"blog-details"},l.a.createElement("h3",null,"Details of the blog ",e),n&&l.a.createElement("div",null,"Loading "),r&&l.a.createElement("div",null,"Error "),a&&l.a.createElement("article",null,l.a.createElement("h2",null,a.title),l.a.createElement("p",null,"Written By ",a.author),l.a.createElement("div",null,a.body)),l.a.createElement(c.b,{style:{textDecoration:"none",background:"#f1356d",color:"#fff",padding:"10px"},to:{pathname:"/edit",state:{blog:a}}},"Edit blog"))},O=a(20),j=a(21),y=a(23),k=a(22),x=a(24),N=function(e){function t(e){var a;Object(O.a)(this,t),(a=Object(y.a)(this,Object(k.a)(t).call(this,e))).handleUpdate=function(e){e.preventDefault(),fetch("http://localhost:8000/blogs/".concat(a.state.id),{method:"PUT",body:JSON.stringify(a.state),headers:{"Content-Type":"application/json"}}).then((function(){a.props.history.push("/")}))};var n=e.location.state.blog,l=n.title,r=n.body,o=n.author,c=n.id;return a.state={title:l,body:r,author:o,id:c},a}return Object(x.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"create"},l.a.createElement("h2",null,"Update a Blog"),l.a.createElement("form",{onSubmit:this.handleUpdate.bind(this)},l.a.createElement("label",null,"Blog title"),l.a.createElement("input",{name:"title",type:"text",onChange:function(t){return e.setState({title:t.target.value})},required:!0,value:this.state.title}),l.a.createElement("label",null,"Blog body"),l.a.createElement("textarea",{name:"body",value:this.state.body,onChange:function(t){return e.setState({body:t.target.value})},required:!0}),l.a.createElement("label",null,"Blog author"),l.a.createElement("select",{name:"author",value:this.state.author,onChange:function(t){return e.setState({author:t.target.value})}},l.a.createElement("option",{value:"Gideon"},"Gideon"),l.a.createElement("option",{value:"Odiokine"},"Odiokine"),l.a.createElement("option",{value:"Okon"},"Okon")),l.a.createElement("button",null,"Update Blog")))}}]),t}(n.Component),S=Object(u.h)(N);var B=function(){return l.a.createElement(c.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(i,null),l.a.createElement("div",{className:"content"},l.a.createElement(u.c,null,l.a.createElement(u.a,{path:"/",exact:!0},l.a.createElement(p,null)),l.a.createElement(u.a,{path:"/create"},l.a.createElement(g,null)),l.a.createElement(u.a,{path:"/blogs/:id"},l.a.createElement(v,null)),l.a.createElement(u.a,{path:"/edit",render:function(e){return l.a.createElement(S,e)}})))))};o.a.render(l.a.createElement(B,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.e52272b7.chunk.js.map